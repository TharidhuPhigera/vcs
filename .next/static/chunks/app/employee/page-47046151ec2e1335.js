try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="58d84fbd-4fcd-4544-a166-d337d1fcaed5",e._sentryDebugIdIdentifier="sentry-dbid-58d84fbd-4fcd-4544-a166-d337d1fcaed5")}catch(e){}try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="58d84fbd-4fcd-4544-a166-d337d1fcaed5",e._sentryDebugIdIdentifier="sentry-dbid-58d84fbd-4fcd-4544-a166-d337d1fcaed5")}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[92],{4774:(e,t,l)=>{Promise.resolve().then(l.bind(l,8213))},8213:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>s});var a=l(5155),i=l(2115),o=l(6046),r=l(5565);function s(){var e,t;let[l,s]=(0,i.useState)(""),[d,n]=(0,i.useState)(""),[c,u]=(0,i.useState)(""),[b,h]=(0,i.useState)(""),[m,f]=(0,i.useState)(null),[g,p]=(0,i.useState)(null),[x,w]=(0,i.useState)([]),v=(0,o.useRouter)();(0,i.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/cargo"),t=await e.json();w(t)}catch(e){console.error("Error fetching cargo data:",e)}})()},[]);let y=async e=>{if(e.preventDefault(),!l||!d||!c||!b){alert("Please fill out all the required fields.");return}try{let e=(null==g?void 0:g.imageUrl)||"";if(m){let t=new FormData;t.append("file",m),t.append("upload_preset","VipulaCargoService");let l=m.type.startsWith("video/"),a=await fetch(l?"https://api.cloudinary.com/v1_1/de4cqxrsu/video/upload":"https://api.cloudinary.com/v1_1/de4cqxrsu/image/upload",{method:"POST",body:t});if(!a.ok)throw Error("Media upload failed");e=(await a.json()).secure_url}let t={note:d,estimatedDelivery:c,status:b,imageUrl:e},l=await fetch("/api/cargo/".concat(null==g?void 0:g._id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(l.ok)alert("Cargo info updated successfully!"),s(""),n(""),u(""),h(""),f(null),p(null);else{let e=await l.json();alert(e.message||"Error updating cargo info.")}}catch(e){console.error("Error submitting cargo info:",e),alert("Error submitting cargo info.")}};return(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-[#001a33] to-[#004d66] flex flex-col items-center justify-center relative text-white overflow-hidden",children:[(0,a.jsxs)("div",{className:"absolute inset-0 z-0",children:[(0,a.jsx)("div",{className:"absolute w-64 h-64 bg-[#00b5e2] rounded-full opacity-20 animate-blob animation-delay-2000 top-1/4 left-1/4"}),(0,a.jsx)("div",{className:"absolute w-64 h-64 bg-[#009ec1] rounded-full opacity-20 animate-blob animation-delay-4000 top-1/2 right-1/4"}),(0,a.jsx)("div",{className:"absolute w-64 h-64 bg-[#007399] rounded-full opacity-20 animate-blob animation-delay-6000 bottom-1/4 left-1/2"})]}),(0,a.jsx)("div",{className:"absolute top-0 w-full flex justify-end p-4 z-10",children:(0,a.jsx)("button",{onClick:()=>v.push("/"),className:"text-white bg-black/20 backdrop-blur-md px-4 py-2 rounded-lg hover:bg-black/30 transition border border-white/10",children:"Log Out"})}),(0,a.jsxs)("div",{className:"text-center mb-8 z-10",children:[(0,a.jsx)("h1",{className:"text-5xl font-bold text-white drop-shadow-lg",children:"Vipula Cargo Service"}),(0,a.jsx)("p",{className:"text-lg text-white/80 mt-2",children:"Update Cargo Information"})]}),(0,a.jsxs)("form",{onSubmit:y,className:"bg-white/10 backdrop-blur-md rounded-xl shadow-2xl p-8 w-full max-w-2xl border border-white/10 z-10",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold text-white mb-6 text-center",children:"Update Cargo Details"}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-white/80 font-medium mb-2",children:"Cargo Number"}),(0,a.jsx)("input",{type:"text",value:l,onChange:e=>{s(e.target.value)},className:"w-full px-4 py-2 bg-white/10 backdrop-blur-md rounded-lg focus:ring-2 focus:ring-[#00b5e2] focus:outline-none text-white placeholder-white/50 border border-white/10",placeholder:"Enter cargo number"})]}),(0,a.jsx)("button",{type:"button",onClick:()=>{let e=x.find(e=>e.referenceNumber===l);e?(p(e),n(e.note),u(e.estimatedDelivery||""),h(e.status||"")):alert("Cargo number not found.")},className:"w-full bg-[#00b5e2] text-white py-2 rounded-lg hover:bg-[#009ec1] transition mb-4",children:"Search Cargo"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-white/80 font-medium mb-2",children:"Estimated Delivery"}),(0,a.jsx)("input",{type:"date",value:c,onChange:e=>{u(e.target.value)},className:"w-full px-4 py-2 bg-white/10 backdrop-blur-md rounded-lg focus:ring-2 focus:ring-[#00b5e2] focus:outline-none text-white placeholder-white/50 border border-white/10"})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-white/80 font-medium mb-2",children:"Status"}),(0,a.jsxs)("select",{value:b,onChange:e=>{h(e.target.value)},className:"w-full px-4 py-2 bg-white/10 backdrop-blur-md rounded-lg focus:ring-2 focus:ring-[#00b5e2] focus:outline-none text-white placeholder-white/50 border border-white/10",children:[(0,a.jsx)("option",{value:"",children:"Select Status"}),(0,a.jsx)("option",{value:"Pending",children:"Pending"}),(0,a.jsx)("option",{value:"In Transit",children:"In Transit"}),(0,a.jsx)("option",{value:"Delivered",children:"Delivered"})]})]})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-white/80 font-medium mb-2",children:"Note"}),(0,a.jsx)("textarea",{value:d,onChange:e=>{n(e.target.value)},className:"w-full px-4 py-2 bg-white/10 backdrop-blur-md rounded-lg focus:ring-2 focus:ring-[#00b5e2] focus:outline-none text-white placeholder-white/50 border border-white/10",placeholder:"Add a note",rows:4})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("label",{className:"block text-white/80 font-medium mb-2",children:"Upload Proof (Image or Video)"}),(0,a.jsx)("input",{type:"file",onChange:e=>{f(e.target.files?e.target.files[0]:null)},accept:"image/*, video/*",className:"w-full px-4 py-2 bg-white/10 backdrop-blur-md rounded-lg focus:ring-2 focus:ring-[#00b5e2] focus:outline-none text-white placeholder-white/50 border border-white/10"}),(0,a.jsx)("p",{className:"text-sm text-white/60 mt-1",children:"Accepted formats: JPG, PNG, GIF, MP4, MOV, AVI"})]}),(null==g?void 0:g.imageUrl)&&(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("label",{className:"block text-white/80 font-medium mb-2",children:"Existing Proof"}),(e=g.imageUrl)&&["mp4","mov","avi","webm"].includes((null===(t=e.split(".").pop())||void 0===t?void 0:t.toLowerCase())||"")?(0,a.jsx)("div",{className:"relative",children:(0,a.jsx)("video",{src:g.imageUrl,className:"w-full h-auto rounded-lg",controls:!0})}):(0,a.jsx)(r.default,{src:g.imageUrl,alt:"Cargo Proof",fill:!0,className:"object-contain rounded-lg",sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw"})]}),(0,a.jsx)("button",{type:"submit",className:"w-full bg-[#00b5e2] text-white py-2 rounded-lg hover:bg-[#009ec1] transition",children:"Update Cargo"})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[738,850,441,221,358],()=>t(4774)),_N_E=e.O()}]);