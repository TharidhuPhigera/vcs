try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},r=(new e.Error).stack;r&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[r]="53aeb1dd-29d4-4a5c-a1c2-c1daabaf445d",e._sentryDebugIdIdentifier="sentry-dbid-53aeb1dd-29d4-4a5c-a1c2-c1daabaf445d")}catch(e){}try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},r=(new e.Error).stack;r&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[r]="53aeb1dd-29d4-4a5c-a1c2-c1daabaf445d",e._sentryDebugIdIdentifier="sentry-dbid-53aeb1dd-29d4-4a5c-a1c2-c1daabaf445d")}catch(e){}(()=>{var e={};e.id=551,e.ids=[551],e.modules={44725:e=>{function r(e){var r=Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}r.keys=()=>[],r.resolve=r,r.id=44725,e.exports=r},56801:e=>{"use strict";e.exports=require("import-in-the-middle")},56037:e=>{"use strict";e.exports=require("mongoose")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},19063:e=>{"use strict";e.exports=require("require-in-the-middle")},84297:e=>{"use strict";e.exports=require("async_hooks")},79646:e=>{"use strict";e.exports=require("child_process")},55511:e=>{"use strict";e.exports=require("crypto")},36686:e=>{"use strict";e.exports=require("diagnostics_channel")},94735:e=>{"use strict";e.exports=require("events")},29021:e=>{"use strict";e.exports=require("fs")},8086:e=>{"use strict";e.exports=require("module")},21820:e=>{"use strict";e.exports=require("os")},33873:e=>{"use strict";e.exports=require("path")},74998:e=>{"use strict";e.exports=require("perf_hooks")},19771:e=>{"use strict";e.exports=require("process")},83997:e=>{"use strict";e.exports=require("tty")},79551:e=>{"use strict";e.exports=require("url")},28354:e=>{"use strict";e.exports=require("util")},73566:e=>{"use strict";e.exports=require("worker_threads")},31421:e=>{"use strict";e.exports=require("node:child_process")},53053:e=>{"use strict";e.exports=require("node:diagnostics_channel")},73024:e=>{"use strict";e.exports=require("node:fs")},37067:e=>{"use strict";e.exports=require("node:http")},44708:e=>{"use strict";e.exports=require("node:https")},86592:e=>{"use strict";e.exports=require("node:inspector")},77030:e=>{"use strict";e.exports=require("node:net")},48161:e=>{"use strict";e.exports=require("node:os")},76760:e=>{"use strict";e.exports=require("node:path")},80481:e=>{"use strict";e.exports=require("node:readline")},57075:e=>{"use strict";e.exports=require("node:stream")},41692:e=>{"use strict";e.exports=require("node:tls")},57975:e=>{"use strict";e.exports=require("node:util")},98300:e=>{"use strict";e.exports=require("node:worker_threads")},38522:e=>{"use strict";e.exports=require("node:zlib")},81030:(e,r,t)=>{"use strict";t.r(r),t.d(r,{patchFetch:()=>H,routeModule:()=>I,serverHooks:()=>j,workAsyncStorage:()=>N,workUnitAsyncStorage:()=>R});var s={};t.r(s),t.d(s,{DELETE:()=>D,GET:()=>A,HEAD:()=>O,OPTIONS:()=>U,PATCH:()=>k,POST:()=>_,PUT:()=>P});var o=t(42611),i=t(53420),n=t(6723),u=t(97391),a=t(63033),d=t(29262),c=t(21452),p=t(77890);async function l(e){try{let{username:r}=await e.json();console.log("Received username:",r),await (0,d.N)();let t=await c.A.findOne({username:r}).select("_id");if(t)return console.log("User found:",t),p.NextResponse.json({userExists:!0});return console.log("No user found with the username:",r),p.NextResponse.json({userExists:!1})}catch(e){return console.error("Error during user existence check:",e),p.NextResponse.json({error:e.message||"An error occurred"},{status:500})}}let x={...a},y="workUnitAsyncStorage"in x?x.workUnitAsyncStorage:"requestAsyncStorage"in x?x.requestAsyncStorage:void 0;function f(e,r){return"phase-production-build"===process.env.NEXT_PHASE||"function"!=typeof e?e:new Proxy(e,{apply:(e,t,s)=>{let o;try{let e=y?.getStore();o=e?.headers}catch(e){}return u.wrapRouteHandlerWithSentry(e,{method:r,parameterizedRoute:"/api/userExists",headers:o}).apply(t,s)}})}let q=f(void 0,"GET"),g=f(l,"POST"),h=f(void 0,"PUT"),w=f(void 0,"PATCH"),b=f(void 0,"DELETE"),E=f(void 0,"HEAD"),v=f(void 0,"OPTIONS"),m={...a},S="workUnitAsyncStorage"in m?m.workUnitAsyncStorage:"requestAsyncStorage"in m?m.requestAsyncStorage:void 0;function T(e,r){return"phase-production-build"===process.env.NEXT_PHASE||"function"!=typeof e?e:new Proxy(e,{apply:(e,t,s)=>{let o;try{let e=S?.getStore();o=e?.headers}catch(e){}return u.wrapRouteHandlerWithSentry(e,{method:r,parameterizedRoute:"/api/userExists",headers:o}).apply(t,s)}})}let A=T(q,"GET"),_=T(g,"POST"),P=T(h,"PUT"),k=T(w,"PATCH"),D=T(b,"DELETE"),O=T(E,"HEAD"),U=T(v,"OPTIONS"),I=new o.AppRouteRouteModule({definition:{kind:i.RouteKind.APP_ROUTE,page:"/api/userExists/route",pathname:"/api/userExists",filename:"route",bundlePath:"app/api/userExists/route"},resolvedPagePath:"/Users/tharidhu/vcs/app/api/userExists/route.js",nextConfigOutput:"",userland:s}),{workAsyncStorage:N,workUnitAsyncStorage:R,serverHooks:j}=I;function H(){return(0,n.patchFetch)({workAsyncStorage:N,workUnitAsyncStorage:R})}},96487:()=>{},78335:()=>{},21452:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});var s=t(56037),o=t.n(s),i=t(57301),n=t.n(i);let u=new(o()).Schema({username:{type:String,required:!0,unique:!0},password:{type:String,required:!0},role:{type:String,required:!0}});u.methods.comparePassword=async function(e){return n().compare(e,this.password)};let a=o().models.User||o().model("User",u)},29262:(e,r,t)=>{"use strict";t.d(r,{N:()=>i});var s=t(56037),o=t.n(s);async function i(){if(!o().connections[0].readyState)try{await o().connect(process.env.MONGO_URI),console.log("Database connected")}catch(e){throw console.error("Database connection failed",e),Error("Database connection failed")}}}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[723,391,972,301],()=>t(81030));module.exports=s})();
//# sourceMappingURL=route.js.map