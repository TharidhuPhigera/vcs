try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},r=(new e.Error).stack;r&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[r]="b7a8d1a0-0766-4ef1-8a55-3d384170ebbb",e._sentryDebugIdIdentifier="sentry-dbid-b7a8d1a0-0766-4ef1-8a55-3d384170ebbb")}catch(e){}try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},r=(new e.Error).stack;r&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[r]="b7a8d1a0-0766-4ef1-8a55-3d384170ebbb",e._sentryDebugIdIdentifier="sentry-dbid-b7a8d1a0-0766-4ef1-8a55-3d384170ebbb")}catch(e){}(()=>{var e={};e.id=954,e.ids=[954],e.modules={44725:e=>{function r(e){var r=Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}r.keys=()=>[],r.resolve=r,r.id=44725,e.exports=r},5486:e=>{"use strict";e.exports=require("bcrypt")},56801:e=>{"use strict";e.exports=require("import-in-the-middle")},56037:e=>{"use strict";e.exports=require("mongoose")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},19063:e=>{"use strict";e.exports=require("require-in-the-middle")},84297:e=>{"use strict";e.exports=require("async_hooks")},79646:e=>{"use strict";e.exports=require("child_process")},55511:e=>{"use strict";e.exports=require("crypto")},36686:e=>{"use strict";e.exports=require("diagnostics_channel")},94735:e=>{"use strict";e.exports=require("events")},29021:e=>{"use strict";e.exports=require("fs")},8086:e=>{"use strict";e.exports=require("module")},21820:e=>{"use strict";e.exports=require("os")},33873:e=>{"use strict";e.exports=require("path")},74998:e=>{"use strict";e.exports=require("perf_hooks")},19771:e=>{"use strict";e.exports=require("process")},83997:e=>{"use strict";e.exports=require("tty")},79551:e=>{"use strict";e.exports=require("url")},28354:e=>{"use strict";e.exports=require("util")},73566:e=>{"use strict";e.exports=require("worker_threads")},31421:e=>{"use strict";e.exports=require("node:child_process")},53053:e=>{"use strict";e.exports=require("node:diagnostics_channel")},73024:e=>{"use strict";e.exports=require("node:fs")},37067:e=>{"use strict";e.exports=require("node:http")},44708:e=>{"use strict";e.exports=require("node:https")},86592:e=>{"use strict";e.exports=require("node:inspector")},77030:e=>{"use strict";e.exports=require("node:net")},48161:e=>{"use strict";e.exports=require("node:os")},76760:e=>{"use strict";e.exports=require("node:path")},80481:e=>{"use strict";e.exports=require("node:readline")},57075:e=>{"use strict";e.exports=require("node:stream")},41692:e=>{"use strict";e.exports=require("node:tls")},57975:e=>{"use strict";e.exports=require("node:util")},98300:e=>{"use strict";e.exports=require("node:worker_threads")},38522:e=>{"use strict";e.exports=require("node:zlib")},59969:(e,r,t)=>{"use strict";t.r(r),t.d(r,{patchFetch:()=>G,routeModule:()=>j,serverHooks:()=>M,workAsyncStorage:()=>H,workUnitAsyncStorage:()=>C});var s={};t.r(s),t.d(s,{DELETE:()=>I,GET:()=>D,HEAD:()=>U,OPTIONS:()=>R,PATCH:()=>N,POST:()=>k,PUT:()=>O});var i=t(42611),o=t(53420),n=t(6723),u=t(97391),a=t(63033),d=t(77890),p=t(56037),c=t.n(p),l=t(99363);async function y(){c().connections[0].readyState||await c().connect(process.env.MONGO_URI)}async function g(){await y();try{let e=await l.A.find();return d.NextResponse.json(e)}catch(e){return console.error("Error fetching cargo:",e),d.NextResponse.json({message:"Error fetching cargo"},{status:500})}}async function x(e){await y();try{let{referenceNumber:r,status:t,origin:s,destination:i,estimatedDelivery:o,unitCount:n,payment:u,note:a,imageUrl:p,password:c}=await e.json(),y=new Date(o),g=new l.A({referenceNumber:r,status:t,origin:s,destination:i,estimatedDelivery:y,unitCount:n,payment:u,note:a,imageUrl:p,password:c});return await g.save(),d.NextResponse.json(g,{status:201})}catch(e){return console.error("Error adding cargo:",e),d.NextResponse.json({message:"Error adding cargo"},{status:500})}}let q={...a},f="workUnitAsyncStorage"in q?q.workUnitAsyncStorage:"requestAsyncStorage"in q?q.requestAsyncStorage:void 0;function h(e,r){return"phase-production-build"===process.env.NEXT_PHASE||"function"!=typeof e?e:new Proxy(e,{apply:(e,t,s)=>{let i;try{let e=f?.getStore();i=e?.headers}catch(e){}return u.wrapRouteHandlerWithSentry(e,{method:r,parameterizedRoute:"/api/cargo",headers:i}).apply(t,s)}})}let b=h(g,"GET"),w=h(x,"POST"),S=h(void 0,"PUT"),m=h(void 0,"PATCH"),v=h(void 0,"DELETE"),E=h(void 0,"HEAD"),T=h(void 0,"OPTIONS"),A={...a},_="workUnitAsyncStorage"in A?A.workUnitAsyncStorage:"requestAsyncStorage"in A?A.requestAsyncStorage:void 0;function P(e,r){return"phase-production-build"===process.env.NEXT_PHASE||"function"!=typeof e?e:new Proxy(e,{apply:(e,t,s)=>{let i;try{let e=_?.getStore();i=e?.headers}catch(e){}return u.wrapRouteHandlerWithSentry(e,{method:r,parameterizedRoute:"/api/cargo",headers:i}).apply(t,s)}})}let D=P(b,"GET"),k=P(w,"POST"),O=P(S,"PUT"),N=P(m,"PATCH"),I=P(v,"DELETE"),U=P(E,"HEAD"),R=P(T,"OPTIONS"),j=new i.AppRouteRouteModule({definition:{kind:o.RouteKind.APP_ROUTE,page:"/api/cargo/route",pathname:"/api/cargo",filename:"route",bundlePath:"app/api/cargo/route"},resolvedPagePath:"/Users/tharidhu/vcs/app/api/cargo/route.js",nextConfigOutput:"",userland:s}),{workAsyncStorage:H,workUnitAsyncStorage:C,serverHooks:M}=j;function G(){return(0,n.patchFetch)({workAsyncStorage:H,workUnitAsyncStorage:C})}},96487:()=>{},78335:()=>{},99363:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});var s=t(56037),i=t.n(s),o=t(5486),n=t.n(o);let u=new(i()).Schema({referenceNumber:{type:String,required:!0,unique:!0},status:{type:String,required:!1},origin:{type:String,required:!0},destination:{type:String,required:!0},estimatedDelivery:{type:Date,required:!1},unitCount:{type:Number,required:!0,min:1},payment:{type:Number,required:!0},password:{type:String,required:!0},note:{type:String,required:!1},imageUrl:{type:String}});u.pre("save",async function(e){if(this.isModified("password")){let e=await n().genSalt(10);this.password=await n().hash(this.password,e)}e()});let a=i().models.Cargo||i().model("Cargo",u)}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[723,391,972],()=>t(59969));module.exports=s})();
//# sourceMappingURL=route.js.map