try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},r=(new e.Error).stack;r&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[r]="f4209b17-8ad9-42d6-92a3-37ae4ac3a244",e._sentryDebugIdIdentifier="sentry-dbid-f4209b17-8ad9-42d6-92a3-37ae4ac3a244")}catch(e){}try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},r=(new e.Error).stack;r&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[r]="f4209b17-8ad9-42d6-92a3-37ae4ac3a244",e._sentryDebugIdIdentifier="sentry-dbid-f4209b17-8ad9-42d6-92a3-37ae4ac3a244")}catch(e){}(()=>{var e={};e.id=816,e.ids=[816],e.modules={44725:e=>{function r(e){var r=Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}r.keys=()=>[],r.resolve=r,r.id=44725,e.exports=r},5486:e=>{"use strict";e.exports=require("bcrypt")},56801:e=>{"use strict";e.exports=require("import-in-the-middle")},56037:e=>{"use strict";e.exports=require("mongoose")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},19063:e=>{"use strict";e.exports=require("require-in-the-middle")},84297:e=>{"use strict";e.exports=require("async_hooks")},79646:e=>{"use strict";e.exports=require("child_process")},55511:e=>{"use strict";e.exports=require("crypto")},36686:e=>{"use strict";e.exports=require("diagnostics_channel")},94735:e=>{"use strict";e.exports=require("events")},29021:e=>{"use strict";e.exports=require("fs")},8086:e=>{"use strict";e.exports=require("module")},21820:e=>{"use strict";e.exports=require("os")},33873:e=>{"use strict";e.exports=require("path")},74998:e=>{"use strict";e.exports=require("perf_hooks")},19771:e=>{"use strict";e.exports=require("process")},83997:e=>{"use strict";e.exports=require("tty")},79551:e=>{"use strict";e.exports=require("url")},28354:e=>{"use strict";e.exports=require("util")},73566:e=>{"use strict";e.exports=require("worker_threads")},31421:e=>{"use strict";e.exports=require("node:child_process")},53053:e=>{"use strict";e.exports=require("node:diagnostics_channel")},73024:e=>{"use strict";e.exports=require("node:fs")},37067:e=>{"use strict";e.exports=require("node:http")},44708:e=>{"use strict";e.exports=require("node:https")},86592:e=>{"use strict";e.exports=require("node:inspector")},77030:e=>{"use strict";e.exports=require("node:net")},48161:e=>{"use strict";e.exports=require("node:os")},76760:e=>{"use strict";e.exports=require("node:path")},80481:e=>{"use strict";e.exports=require("node:readline")},57075:e=>{"use strict";e.exports=require("node:stream")},41692:e=>{"use strict";e.exports=require("node:tls")},57975:e=>{"use strict";e.exports=require("node:util")},98300:e=>{"use strict";e.exports=require("node:worker_threads")},38522:e=>{"use strict";e.exports=require("node:zlib")},77194:(e,r,t)=>{"use strict";t.r(r),t.d(r,{patchFetch:()=>H,routeModule:()=>N,serverHooks:()=>R,workAsyncStorage:()=>U,workUnitAsyncStorage:()=>I});var s={};t.r(s),t.d(s,{DELETE:()=>P,GET:()=>T,HEAD:()=>O,OPTIONS:()=>k,PATCH:()=>D,POST:()=>A,PUT:()=>_});var i=t(42611),o=t(53420),n=t(6723),u=t(97391),a=t(63033),d=t(29262),p=t(99363);async function c(e){await (0,d.N)();let r=new URL(e.url).pathname.split("/").pop(),{note:t,imageUrl:s,estimatedDelivery:i,status:o,origin:n,destination:u,unitCount:a,payment:c}=await e.json();try{let e=await p.A.findByIdAndUpdate(r,{note:t,imageUrl:s,estimatedDelivery:i,status:o,origin:n,destination:u,unitCount:a,payment:c},{new:!0});if(!e)return new Response(JSON.stringify({message:"Cargo not found"}),{status:404});return new Response(JSON.stringify(e),{status:200})}catch(e){return console.error(e),new Response(JSON.stringify({message:"Error updating cargo"}),{status:500})}}let l={...a},y="workUnitAsyncStorage"in l?l.workUnitAsyncStorage:"requestAsyncStorage"in l?l.requestAsyncStorage:void 0;function g(e,r){return"phase-production-build"===process.env.NEXT_PHASE||"function"!=typeof e?e:new Proxy(e,{apply:(e,t,s)=>{let i;try{let e=y?.getStore();i=e?.headers}catch(e){}return u.wrapRouteHandlerWithSentry(e,{method:r,parameterizedRoute:"/api/cargo/[id]",headers:i}).apply(t,s)}})}let f=g(void 0,"GET"),q=g(void 0,"POST"),x=g(c,"PUT"),h=g(void 0,"PATCH"),w=g(void 0,"DELETE"),S=g(void 0,"HEAD"),b=g(void 0,"OPTIONS"),m={...a},v="workUnitAsyncStorage"in m?m.workUnitAsyncStorage:"requestAsyncStorage"in m?m.requestAsyncStorage:void 0;function E(e,r){return"phase-production-build"===process.env.NEXT_PHASE||"function"!=typeof e?e:new Proxy(e,{apply:(e,t,s)=>{let i;try{let e=v?.getStore();i=e?.headers}catch(e){}return u.wrapRouteHandlerWithSentry(e,{method:r,parameterizedRoute:"/api/cargo/[id]",headers:i}).apply(t,s)}})}let T=E(f,"GET"),A=E(q,"POST"),_=E(x,"PUT"),D=E(h,"PATCH"),P=E(w,"DELETE"),O=E(S,"HEAD"),k=E(b,"OPTIONS"),N=new i.AppRouteRouteModule({definition:{kind:o.RouteKind.APP_ROUTE,page:"/api/cargo/[id]/route",pathname:"/api/cargo/[id]",filename:"route",bundlePath:"app/api/cargo/[id]/route"},resolvedPagePath:"/Users/tharidhu/vcs/app/api/cargo/[id]/route.js",nextConfigOutput:"",userland:s}),{workAsyncStorage:U,workUnitAsyncStorage:I,serverHooks:R}=N;function H(){return(0,n.patchFetch)({workAsyncStorage:U,workUnitAsyncStorage:I})}},96487:()=>{},78335:()=>{},99363:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});var s=t(56037),i=t.n(s),o=t(5486),n=t.n(o);let u=new(i()).Schema({referenceNumber:{type:String,required:!0,unique:!0},status:{type:String,required:!1},origin:{type:String,required:!0},destination:{type:String,required:!0},estimatedDelivery:{type:Date,required:!1},unitCount:{type:Number,required:!0,min:1},payment:{type:Number,required:!0},password:{type:String,required:!0},note:{type:String,required:!1},imageUrl:{type:String}});u.pre("save",async function(e){if(this.isModified("password")){let e=await n().genSalt(10);this.password=await n().hash(this.password,e)}e()});let a=i().models.Cargo||i().model("Cargo",u)},42611:(e,r,t)=>{"use strict";e.exports=t(44870)},29262:(e,r,t)=>{"use strict";t.d(r,{N:()=>o});var s=t(56037),i=t.n(s);async function o(){if(!i().connections[0].readyState)try{await i().connect(process.env.MONGO_URI),console.log("Database connected")}catch(e){throw console.error("Database connection failed",e),Error("Database connection failed")}}}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[723,391],()=>t(77194));module.exports=s})();
//# sourceMappingURL=route.js.map