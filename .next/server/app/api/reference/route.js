try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},r=(new e.Error).stack;r&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[r]="5d996093-d4df-4ab4-8533-6a8b3a2e8520",e._sentryDebugIdIdentifier="sentry-dbid-5d996093-d4df-4ab4-8533-6a8b3a2e8520")}catch(e){}try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},r=(new e.Error).stack;r&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[r]="5d996093-d4df-4ab4-8533-6a8b3a2e8520",e._sentryDebugIdIdentifier="sentry-dbid-5d996093-d4df-4ab4-8533-6a8b3a2e8520")}catch(e){}(()=>{var e={};e.id=201,e.ids=[201],e.modules={44725:e=>{function r(e){var r=Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}r.keys=()=>[],r.resolve=r,r.id=44725,e.exports=r},5486:e=>{"use strict";e.exports=require("bcrypt")},56801:e=>{"use strict";e.exports=require("import-in-the-middle")},56037:e=>{"use strict";e.exports=require("mongoose")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},19063:e=>{"use strict";e.exports=require("require-in-the-middle")},84297:e=>{"use strict";e.exports=require("async_hooks")},79646:e=>{"use strict";e.exports=require("child_process")},55511:e=>{"use strict";e.exports=require("crypto")},36686:e=>{"use strict";e.exports=require("diagnostics_channel")},94735:e=>{"use strict";e.exports=require("events")},29021:e=>{"use strict";e.exports=require("fs")},8086:e=>{"use strict";e.exports=require("module")},21820:e=>{"use strict";e.exports=require("os")},33873:e=>{"use strict";e.exports=require("path")},74998:e=>{"use strict";e.exports=require("perf_hooks")},19771:e=>{"use strict";e.exports=require("process")},83997:e=>{"use strict";e.exports=require("tty")},79551:e=>{"use strict";e.exports=require("url")},28354:e=>{"use strict";e.exports=require("util")},73566:e=>{"use strict";e.exports=require("worker_threads")},31421:e=>{"use strict";e.exports=require("node:child_process")},53053:e=>{"use strict";e.exports=require("node:diagnostics_channel")},73024:e=>{"use strict";e.exports=require("node:fs")},37067:e=>{"use strict";e.exports=require("node:http")},44708:e=>{"use strict";e.exports=require("node:https")},86592:e=>{"use strict";e.exports=require("node:inspector")},77030:e=>{"use strict";e.exports=require("node:net")},48161:e=>{"use strict";e.exports=require("node:os")},76760:e=>{"use strict";e.exports=require("node:path")},80481:e=>{"use strict";e.exports=require("node:readline")},57075:e=>{"use strict";e.exports=require("node:stream")},41692:e=>{"use strict";e.exports=require("node:tls")},57975:e=>{"use strict";e.exports=require("node:util")},98300:e=>{"use strict";e.exports=require("node:worker_threads")},38522:e=>{"use strict";e.exports=require("node:zlib")},31738:(e,r,t)=>{"use strict";t.r(r),t.d(r,{patchFetch:()=>L,routeModule:()=>C,serverHooks:()=>G,workAsyncStorage:()=>H,workUnitAsyncStorage:()=>M});var s={};t.r(s),t.d(s,{DELETE:()=>U,GET:()=>D,HEAD:()=>R,OPTIONS:()=>j,PATCH:()=>N,POST:()=>O,PUT:()=>I});var i=t(42611),o=t(53420),n=t(6723),u=t(97391),a=t(63033),d=t(77890),p=t(56037),c=t.n(p),l=t(5486),y=t.n(l),f=t(99363);async function g(){c().connections[0].readyState||await c().connect(process.env.MONGO_URI)}async function x(e){await g();try{let{referenceNumber:r,password:t}=await e.json(),s=await f.A.findOne({referenceNumber:r});if(!s)return d.NextResponse.json({message:"Cargo not found"},{status:404});if(!await y().compare(t,s.password))return d.NextResponse.json({message:"Invalid reference number or password"},{status:401});return console.log("Cargo found:",s),d.NextResponse.json(s)}catch(e){return console.error("Error fetching cargo details:",e),d.NextResponse.json({message:"Error fetching cargo details"},{status:500})}}let q={...a},h="workUnitAsyncStorage"in q?q.workUnitAsyncStorage:"requestAsyncStorage"in q?q.requestAsyncStorage:void 0;function w(e,r){return"phase-production-build"===process.env.NEXT_PHASE||"function"!=typeof e?e:new Proxy(e,{apply:(e,t,s)=>{let i;try{let e=h?.getStore();i=e?.headers}catch(e){}return u.wrapRouteHandlerWithSentry(e,{method:r,parameterizedRoute:"/api/reference",headers:i}).apply(t,s)}})}let b=w(void 0,"GET"),m=w(x,"POST"),S=w(void 0,"PUT"),v=w(void 0,"PATCH"),E=w(void 0,"DELETE"),T=w(void 0,"HEAD"),A=w(void 0,"OPTIONS"),_={...a},P="workUnitAsyncStorage"in _?_.workUnitAsyncStorage:"requestAsyncStorage"in _?_.requestAsyncStorage:void 0;function k(e,r){return"phase-production-build"===process.env.NEXT_PHASE||"function"!=typeof e?e:new Proxy(e,{apply:(e,t,s)=>{let i;try{let e=P?.getStore();i=e?.headers}catch(e){}return u.wrapRouteHandlerWithSentry(e,{method:r,parameterizedRoute:"/api/reference",headers:i}).apply(t,s)}})}let D=k(b,"GET"),O=k(m,"POST"),I=k(S,"PUT"),N=k(v,"PATCH"),U=k(E,"DELETE"),R=k(T,"HEAD"),j=k(A,"OPTIONS"),C=new i.AppRouteRouteModule({definition:{kind:o.RouteKind.APP_ROUTE,page:"/api/reference/route",pathname:"/api/reference",filename:"route",bundlePath:"app/api/reference/route"},resolvedPagePath:"/Users/tharidhu/vcs/app/api/reference/route.js",nextConfigOutput:"",userland:s}),{workAsyncStorage:H,workUnitAsyncStorage:M,serverHooks:G}=C;function L(){return(0,n.patchFetch)({workAsyncStorage:H,workUnitAsyncStorage:M})}},96487:()=>{},78335:()=>{},99363:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});var s=t(56037),i=t.n(s),o=t(5486),n=t.n(o);let u=new(i()).Schema({referenceNumber:{type:String,required:!0,unique:!0},status:{type:String,required:!1},origin:{type:String,required:!0},destination:{type:String,required:!0},estimatedDelivery:{type:Date,required:!1},unitCount:{type:Number,required:!0,min:1},payment:{type:Number,required:!0},password:{type:String,required:!0},note:{type:String,required:!1},imageUrl:{type:String}});u.pre("save",async function(e){if(this.isModified("password")){let e=await n().genSalt(10);this.password=await n().hash(this.password,e)}e()});let a=i().models.Cargo||i().model("Cargo",u)}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[723,391,972],()=>t(31738));module.exports=s})();
//# sourceMappingURL=route.js.map